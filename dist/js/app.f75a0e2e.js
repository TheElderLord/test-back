(function(){"use strict";var e={9659:function(e,a,t){var l=t(5130),s=t(6768),n=t(4232);const o={key:0,class:"side-bar"},i={key:0,class:"head"},r={class:"header"},c={class:"dashboard"};function A(e,a,t,l,A,d){const u=(0,s.g2)("SidebarComponent"),v=(0,s.g2)("header-component"),p=(0,s.g2)("dashboard-top"),m=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)(s.FK,null,[d.isLoginPage()?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(u)])),(0,s.Lk)("div",{class:"main",style:(0,n.Tr)({"margin-left":d.isLoginPage()?"auto":l.sidebarWidth})},[d.isLoginPage()?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",i,[(0,s.Lk)("div",r,[d.isLoginPage()?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(v,{key:0}))]),(0,s.Lk)("div",c,[d.isLoginPage()?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(p,{key:0}))])])),(0,s.bF)(m)],4)],64)}var d=t.p+"img/logo.66549db4.png";const u=e=>((0,s.Qi)("data-v-1d049ebf"),e=e(),(0,s.jt)(),e),v={key:0},p=u((()=>(0,s.Lk)("span",{class:"flex justify-center items-center"},[(0,s.Lk)("img",{src:d,alt:"",width:"60%"})],-1))),m=[p],g={key:1,class:"flex justify-center"},b=u((()=>(0,s.Lk)("img",{src:d,alt:"",width:"80%"},null,-1))),k=[b],h=u((()=>(0,s.Lk)("span",{class:"divider"},null,-1)));function f(e,a,t,l,o,i){const r=(0,s.g2)("SidebarLink");return(0,s.uX)(),(0,s.CE)("div",{class:"sidebar",style:(0,n.Tr)({width:l.sidebarWidth})},[(0,s.Lk)("h5",null,[l.collapsed?((0,s.uX)(),(0,s.CE)("span",v,m)):((0,s.uX)(),(0,s.CE)("div",g,k))]),(0,s.bF)(r,{to:"/",icon:"fas fa-chart-pie"},{default:(0,s.k6)((()=>[(0,s.eW)("Количественные показатели")])),_:1}),(0,s.bF)(r,{to:"/time-dash",icon:"fas fa-chart-bar"},{default:(0,s.k6)((()=>[(0,s.eW)("Временные показатели")])),_:1}),(0,s.bF)(r,{to:"/monitoring",icon:"fas fa-eye"},{default:(0,s.k6)((()=>[(0,s.eW)("Мониторинг")])),_:1}),(0,s.bF)(r,{to:"/employee-rate",icon:"fas fa-poll-h"},{default:(0,s.k6)((()=>[(0,s.eW)("Рейтинг сотрудников")])),_:1}),(0,s.bF)(r,{to:"/tickets",icon:"fas fa-ticket-alt"},{default:(0,s.k6)((()=>[(0,s.eW)("Билеты")])),_:1}),h,(0,s.bF)(r,{to:"/chat",icon:"fas fa-comments"},{default:(0,s.k6)((()=>[(0,s.eW)("Чат")])),_:1}),(0,s.bF)(r,{to:"/server",icon:"fas fa-server"},{default:(0,s.k6)((()=>[(0,s.eW)("Серверы")])),_:1}),(0,s.bF)(r,{to:"/bill-board",icon:"fas fa-clipboard-list"},{default:(0,s.k6)((()=>[(0,s.eW)("Доска объявлений")])),_:1}),(0,s.bF)(r,{to:"/users",icon:"fas fa-users"},{default:(0,s.k6)((()=>[(0,s.eW)("Пользователи")])),_:1})],4)}const y={key:0};function L(e,a,t,o,i,r){const c=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.Wv)(c,{to:t.to,class:(0,n.C4)(["link",{active:o.isActive}])},{default:(0,s.k6)((()=>[(0,s.Lk)("i",{class:(0,n.C4)(["icon",t.icon])},null,2),(0,s.bF)(l.eB,{name:"fade"},{default:(0,s.k6)((()=>[o.collapsed?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("span",y,[(0,s.RG)(e.$slots,"default",{},void 0,!0)]))])),_:3})])),_:3},8,["to","class"])}var w=t(1387),E=t(144);const x=(0,E.KR)(!1),C=()=>x.value=!x.value,I=305,_=70,F=(0,s.EW)((()=>`${x.value?_:I}px`));var S={props:{to:{type:String,required:!0},icon:{type:String,required:!0}},setup(e){const a=(0,w.lq)(),t=(0,s.EW)((()=>a.path===e.to));return{isActive:t,collapsed:x}}},R=t(1241);const B=(0,R.A)(S,[["render",L],["__scopeId","data-v-59d072f6"]]);var D=B,K={props:{},components:{SidebarLink:D},setup(){return{collapsed:x,toggleSidebar:C,sidebarWidth:F}}};const X=(0,R.A)(K,[["render",f],["__scopeId","data-v-1d049ebf"]]);var Q=X,T=(t(4114),"data:image/jpeg;base64,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"),j=t(782);const V="10.0.71.46",M="https",U="http"===M?"4000":"8443",O=`${M}://${V}:${U}/api/v1`,q=`${M}://${V}:${U}`,N=`${O}/board`,P=`${O}/branches`,W=`${O}/auth`;t(4603),t(7566),t(8721);var G=t(8355);const z=localStorage.getItem("authToken"),$=async e=>{try{const a=await G.A.get(`${O}/users/${e}`,{headers:{bearer:z}});return a}catch(a){console.log(a)}},Y=async(e,a)=>{try{return await G.A.put(`${O}/users/${e}`,a,{headers:{bearer:z}}),!0}catch(t){return console.log(t),!1}},H=async e=>{try{return await G.A.delete(`${O}/users/${e}`,{headers:{bearer:z}}),!0}catch(a){return console.log(a),!1}},J=async e=>{try{return await G.A.post(`${O}/users/`,e,{headers:{bearer:z}}),!0}catch(a){return console.log(a),!1}},Z=async()=>{try{const e=await G.A.get(`${O}/users`,{headers:{bearer:z}});return e}catch(e){console.log(e)}},ee=async(e,a)=>{try{const t=new URLSearchParams({login:a}).toString(),l=await fetch(`${O}/users/upload?${t}`,{method:"POST",headers:{bearer:z},body:e});return l}catch(t){console.log(t)}},ae=async e=>{const a=e?`${P}?type=${e}`:P,t=localStorage.getItem("authToken");try{const e=await G.A.get(a,{headers:{bearer:t}});return e.data.rows}catch(l){console.log(l)}},te=e=>((0,s.Qi)("data-v-3746b211"),e=e(),(0,s.jt)(),e),le={class:"header-container flex justify-between items-center"},se=te((()=>(0,s.Lk)("i",{class:"fas fa-angle-double-left"},null,-1))),ne=[se],oe={class:"headerInfo flex items-center"},ie={class:"dropdown"},re={class:"dropdown-menu w-full"},ce={class:"inputBlock"},Ae=te((()=>(0,s.Lk)("option",{selected:"",value:"0"},"Выберите филиал",-1))),de=["value"],ue=["disabled"],ve=te((()=>(0,s.Lk)("option",{selected:"",disabled:"",value:"0"},"Выберите отделение",-1))),pe=["value"],me=te((()=>(0,s.Lk)("i",{class:"fas fa-file-download fa-2xl"},null,-1))),ge=[me],be={class:"userInfo"},ke={class:"dropdown"},he={class:"btn dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},fe=["src"],ye={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"};var Le={__name:"HeaderComponent",setup(e){const a=(0,w.rd)(),t=(0,w.lq)(),o=(0,j.Pj)(),i=(0,E.KR)(null),r=(0,E.KR)(""),c=(0,E.KR)(null),A=(0,E.KR)(0),d=(0,E.KR)(0),u=()=>{o.dispatch("logout"),a.push("/login"),console.log("log out")},v=async()=>{try{const e=1*localStorage.getItem("id"),a=await $(e);if(!a)return;if(a.data.user[0].image){console.log(a.data.user[0].image);const e=`${q}/images/`+a.data.user[0].image;localStorage.setItem("image",e),r.value=e}else r.value=T}catch(e){r.value=T,console.log(e)}},p=async()=>{window.print()},m=async()=>{const e=await ae();e&&(c.value=e)},g=async()=>{const e={...t.query};e.branch_id=d.value,e.parent_branch=1*A.value.F_ID,a.push({path:t.path,query:e})},b=()=>{console.log(typeof A.value),0==A.value&&(d.value=0,a.push({...a.currentRoute.value,query:{}}))};return(0,s.wB)((()=>localStorage.getItem("image")),((e,a)=>{r.value=a})),(0,s.sV)((()=>{i.value=localStorage.getItem("login"),v(),m()})),(e,a)=>{const t=(0,s.g2)("v-btn"),o=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",le,[(0,s.Lk)("div",{onClick:a[0]||(a[0]=(...e)=>(0,E.R1)(C)&&(0,E.R1)(C)(...e)),class:(0,n.C4)([{"rotate-180":(0,E.R1)(x)},"toggleIcon p-4"])},ne,2),(0,s.Lk)("div",oe,[(0,s.Lk)("div",ie,[(0,s.bF)(t,{class:"btn dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},{default:(0,s.k6)((()=>[(0,s.eW)(" Фильтр ")])),_:1}),(0,s.Lk)("ul",re,[(0,s.Lk)("div",ce,[(0,s.bo)((0,s.Lk)("select",{class:"form-select","onUpdate:modelValue":a[1]||(a[1]=e=>A.value=e),onChange:a[2]||(a[2]=e=>b())},[Ae,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e},(0,n.v_)(e.F_NAME),9,de)))),128))],544),[[l.u1,A.value]]),(0,s.bo)((0,s.Lk)("select",{disabled:!A.value,class:"form-select","onUpdate:modelValue":a[3]||(a[3]=e=>d.value=e),onChange:a[4]||(a[4]=e=>g())},[ve,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(A.value.children,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.F_ID,value:e.F_ID},(0,n.v_)(e.F_NAME),9,pe)))),128))],40,ue),[[l.u1,d.value]])])])]),(0,s.Lk)("div",{onClick:a[5]||(a[5]=e=>p()),class:"dowloadPage cursor-pointer"},ge),(0,s.Lk)("div",be,[(0,s.Lk)("div",ke,[(0,s.Lk)("button",he,[(0,s.Lk)("img",{src:r.value,alt:"",class:"rounded-full"},null,8,fe),(0,s.eW)(" "+(0,n.v_)(i.value),1)]),(0,s.Lk)("ul",ye,[(0,s.Lk)("li",null,[(0,s.bF)(o,{to:"/profile",class:"dropdown-item",href:"#"},{default:(0,s.k6)((()=>[(0,s.eW)("Мой профиль")])),_:1})]),(0,s.Lk)("li",null,[(0,s.Lk)("a",{onClick:a[6]||(a[6]=e=>u()),class:"dropdown-item",href:"#"},"Выход")])])])])])])}}};const we=(0,R.A)(Le,[["__scopeId","data-v-3746b211"]]);var Ee=we;const xe=e=>((0,s.Qi)("data-v-47b9404a"),e=e(),(0,s.jt)(),e),Ce={key:0,class:"modalBlack"},Ie={class:"box flex"},_e={class:"iconbox"},Fe={class:"icon"},Se={class:"btn button text-white font-sans"},Re=xe((()=>(0,s.Lk)("i",{class:"fas fa-external-link-alt fa-2xl"},null,-1))),Be={class:"text text-white font-sans"},De={class:"amount text-white flex justify-center items-center"},Ke={class:"textBlock flex justify-center items-center"};var Xe={__name:"BlockElement",props:{info:{type:Object,required:!0}},setup(e){const a=e,t=(0,E.KR)(!1);return(l,o)=>{const i=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",{class:"block-container",style:(0,n.Tr)({backgroundColor:e.info.color})},[t.value?((0,s.uX)(),(0,s.CE)("div",Ce)):(0,s.Q3)("",!0),(0,s.Lk)("div",Ie,[(0,s.Lk)("div",_e,[(0,s.Lk)("div",Fe,[(0,s.Lk)("i",{class:(0,n.C4)(a.info.icon)},null,2)]),(0,s.Lk)("button",Se,[(0,s.bF)(i,{to:a.info.link,variant:"outlined"},{default:(0,s.k6)((()=>[Re])),_:1},8,["to"])])]),(0,s.Lk)("div",Be,[(0,s.Lk)("div",De,[(0,s.Lk)("h1",null,(0,n.v_)(a.info.number),1)]),(0,s.Lk)("div",Ke,(0,n.v_)(a.info.text),1)])])],4)}}};const Qe=(0,R.A)(Xe,[["__scopeId","data-v-47b9404a"]]);var Te=Qe;const je=localStorage.getItem("authToken"),Ve=async e=>{const a=e?`${O}/tickets/service-tickets/${e}`:`${O}/tickets/service-tickets`;try{const e=await G.A.get(a,{headers:{bearer:je}});return e}catch(t){console.log(t)}},Me=async e=>{const a=e?`${O}/tickets/all/${e}`:`${O}/tickets/all`;try{const e=await G.A.get(a,{headers:{bearer:je}});return e}catch(t){console.log(t)}},Ue=async e=>{let a=e?`${O}/analytics/${e}`:`${O}/analytics`;try{const e=await G.A.get(a,{headers:{bearer:je}});return e}catch(t){console.log(t)}},Oe=localStorage.getItem("authToken"),qe=async e=>{const a=e?`${O}/tickets/map/${e}`:`${O}/tickets/map`;try{const e=await G.A.get(a,{headers:{bearer:Oe}});return e}catch(t){console.log(t)}},Ne={class:"mainBlocks flex justify-around"},Pe={class:"serverInfo block w-64"},We={class:"markInfo block w-64"},Ge={class:"markInfo block w-64"};var ze={__name:"DashboardTop",setup(e){const a=(0,w.lq)(),t=(0,E.KR)({color:"#130950",icon:"fas fa-server",text:"Количество неработающих УГД",number:11,link:"/server"}),l=(0,E.KR)({color:"#F38E1B",icon:"fas fa-clock",text:"Максимальное время ожидания",number:41,link:"/time-dash"}),n=(0,E.KR)({color:"#6C1895",icon:"fas fa-people-arrows",text:"Максимальное время обслуживания",number:12,link:"/time-dash"}),o=async()=>{try{const e=await qe();let a=0,l=0;const s=e.data.data.server_list;s.map((e=>{e.children.map((e=>{0===e.ONN&&a++,l++}))})),t.value.number=a;const n=(a/l).toFixed(2);console.log(n),n>=.3&&(t.value.color="red")}catch(e){console.log(e)}},i=async()=>{try{const e=await Me();l.value.number=e.data.data.alarm.data[1].count??0,n.value.number=e.data.data.alarm.data[0].count??0}catch(e){console.log("The error in dashboard"),e.response&&401===e.response.status?console.log("Unauthorized. Please login again."):console.log(e)}};return(0,s.wB)((()=>a.query),(()=>{i(),o()})),(0,s.sV)((()=>{o(),i()})),(e,a)=>((0,s.uX)(),(0,s.CE)("div",Ne,[(0,s.Lk)("div",Pe,[(0,s.bF)(Te,{info:t.value},null,8,["info"])]),(0,s.Lk)("div",We,[(0,s.bF)(Te,{info:l.value},null,8,["info"])]),(0,s.Lk)("div",Ge,[(0,s.bF)(Te,{info:n.value},null,8,["info"])])]))}};const $e=ze;var Ye=$e,He={components:{SidebarComponent:Q,HeaderComponent:Ee,DashboardTop:Ye},setup(){const e=(0,w.lq)();return{sidebarWidth:F,route:e}},data(){return{currentRoute:""}},methods:{isLoginPage(){return"/login"===this.$route.path}}};const Je=(0,R.A)(He,[["render",A]]);var Ze=Je;const ea=localStorage.getItem("authToken"),aa=async e=>{let a=[];try{a=await G.A.get(`${O}/tickets/list/${e.branchId}`,{headers:{bearer:ea}})}catch(t){console.log(t)}return a.data.data.tickets},ta=async()=>{try{const e=await G.A.get(`${O}/tickets/branch-tickets`,{headers:{bearer:ea}});return e}catch(e){console.log(e)}},la=async()=>{try{const e=await G.A.get(`${O}/tickets/list`,{headers:{bearer:ea}});return e}catch(e){console.log(e)}},sa=e=>((0,s.Qi)("data-v-2adce98b"),e=e(),(0,s.jt)(),e),na={class:"amount-container"},oa={class:"chartBlock"},ia=sa((()=>(0,s.Lk)("i",{class:"fas fa-arrow-left fa-2xl"},null,-1))),ra={class:"chart p-4"},ca={class:"tickets"};var Aa={__name:"DashboardAmountView",setup(e){const a=(0,w.lq)(),t=(0,E.KR)(0),l=(0,E.KR)(!1),o=(0,E.KR)(""),i=[{align:"center",key:"iin",sortable:!1,title:"ИИН"},{align:"center",key:"ticketno",title:"Номер билета"},{align:"center",key:"servicename",title:"Название услуги"},{align:"center",key:"idbranch",title:"Отделение"},{align:"center",key:"operator",title:"Оператор"},{align:"center",key:"state",title:"Статус"},{align:"center",key:"starttime",title:"Время регистрации"},{align:"center",key:"startservtime",title:"Время обслуживания"},{align:"center",key:"rating",title:"Оценка"},{align:"center",key:"waitover",title:"Превышение времени ожидания"},{align:"center",key:"servover",title:"Превышение времени обслуживания"}],r=(0,E.KR)([]),c=(0,E.KR)([]),A=(0,E.KR)([]),d=(0,E.KR)([]),u=(0,E.KR)([]),v=(0,E.KR)({chart:{type:"bar",height:350,stacked:!0,toolbar:{show:!0},zoom:{enabled:!0},events:{legendClick:function(e,a,t){console.log(e,a,t)}}},colors:["#2ecc71","#3498db","#f39c12","#d35400","#c0392b"],responsive:[{breakpoint:480,options:{legend:{position:"top",offsetX:-10,horizontalAlign:"center",offsetY:-10}}}],plotOptions:{bar:{horizontal:!1,borderRadius:10,dataLabels:{total:{enabled:!0,style:{fontSize:"13px",fontWeight:900}}}}},xaxis:{type:"string",categories:u.value},legend:{position:"top",offsetY:0},fill:{opacity:1}}),p=(0,E.KR)(null),m=async e=>{try{u.value=e.children.map((e=>e.branchName)),d.value=[{name:"Обслуженные",data:e.children.map((e=>e.stateTickets.COMPLETED))},{name:"Обслуживающиеся",data:e.children.map((e=>e.stateTickets.INSERVICE))},{name:"Ожидающие",data:e.children.map((e=>e.stateTickets.NEW))},{name:"Не подошедшие",data:e.children.map((e=>e.stateTickets.MISSED))},{name:"Alarm",data:e.children.map((e=>e.stateTickets.ALARM))}],k()}catch(a){console.log(a)}},g=async e=>{try{r.value=await aa(e)}catch(a){console.log(a)}},b=async(e,a,t)=>{const s=t.dataPointIndex,n=A.value[s];try{n.children&&!l.value&&(m(n),l.value=!0,g(n))}catch(o){console.log(o)}},k=()=>{p.value.updateOptions({xaxis:{categories:u.value},series:[{data:d.value}]})},h=()=>{try{if(u.value=A.value.map((e=>e.branchName)),d.value=[{name:"Обслуженные",data:A.value.map((e=>e.stateTickets.COMPLETED))},{name:"Обслуживающиеся",data:A.value.map((e=>e.stateTickets.INSERVICE))},{name:"Ожидающие",data:A.value.map((e=>e.stateTickets.NEW))},{name:"Не подошедшие",data:A.value.map((e=>e.stateTickets.MISSED))},{name:"Alarm",data:A.value.map((e=>e.stateTickets.ALARM))}],l.value=!1,k(),r.value=c.value,a.query.branch_id){const e=window.location.protocol+"//"+window.location.host+window.location.pathname;history.replaceState({},document.title,e)}}catch(e){alert(e)}},f=async()=>{try{const e=await ta();if(A.value=e.data.data,t.value=e.data.count,a.query.parent_branch){const e=A.value.find((e=>e.branchId===a.query.parent_branch));m(e),g(e),l.value=!0}else h()}catch(e){console.log(e)}},y=async()=>{try{const e=await la();c.value=e.data.data.tickets,r.value=e.data.data.tickets}catch(e){console.log(e)}},L=(0,s.EW)((()=>r.value.map((e=>({...e,starttime:new Date(e.starttime).toLocaleString("ru-RU"),startservtime:new Date(e.startservtime).toLocaleString("ru-RU"),rating:"5"===e.rating?"Отлично":"4"===e.rating?"Хорошо":"4"===e.rating?"Плохо":"Нет оценки",waitover:"true"===e.waitover?"Да":"Нет",servover:"true"===e.servover?"Да":"Нет",state:"COMPLETED"===e.state?"Обслужен":"NEW"===e.state?"Новый":"INSERVICE"===e.state?"Обслуживается":"Бронь",idbranch:e.idbranch}))).sort(((e,a)=>e.starttime-a.starttime))));return(0,s.wB)((()=>a.query),(()=>{f()})),(0,s.sV)((()=>{f(),y()})),(e,a)=>{const r=(0,s.g2)("v-btn"),c=(0,s.g2)("apexchart"),A=(0,s.g2)("v-data-table"),u=(0,s.g2)("v-card");return(0,s.uX)(),(0,s.CE)("div",na,[(0,s.Lk)("h3",null,(0,n.v_)(t.value),1),(0,s.Lk)("div",oa,[l.value?((0,s.uX)(),(0,s.Wv)(r,{key:0,onClick:a[0]||(a[0]=e=>h()),class:"back m-4"},{default:(0,s.k6)((()=>[ia])),_:1})):(0,s.Q3)("",!0),(0,s.Lk)("div",ra,[(0,s.bF)(c,{ref_key:"apexChart",ref:p,height:"500",options:v.value,series:d.value,onDataPointSelection:b},null,8,["options","series"])])]),(0,s.Lk)("div",ca,[(0,s.bF)(u,{title:"Билеты",flat:""},{default:(0,s.k6)((()=>[(0,s.bF)(A,{headers:i,items:L.value,search:o.value,"no-data-text":"Нет доступых билетов","items-per-page-text":"Билетов на странице"},null,8,["items","search"])])),_:1})])])}}};const da=(0,R.A)(Aa,[["__scopeId","data-v-2adce98b"]]);var ua=da;const va={class:"mainBlock flex"},pa={class:"leftBlock"},ma={class:"pickHours"},ga={class:"avg"},ba={class:"rightBlock"},ka={class:"services"};var ha={__name:"DashboardView",setup(e){const a=(0,w.lq)(),t=(0,E.KR)(null),l=(0,E.KR)(null),n=(0,E.KR)(null),o=(0,E.KR)({options:{chart:{height:350,type:"area",zoom:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"straight"},markers:{size:6,hover:{size:8}},title:{text:"",align:"left"},grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{type:"category"},yaxis:[{axisTicks:{show:!0},axisBorder:{show:!0,color:"#FF5733"},labels:{style:{colors:"#FF5733"}},title:{text:"Среднее время обслуживания и ожидания",style:{color:"#FF5733"}}}]},series:[{name:"series1",data:[31,40,28,51,42,109,100]},{name:"series2",data:[11,32,45,32,34,52,41]}]}),i=(0,E.KR)({options:{chart:{height:350,type:"area",zoom:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"straight"},markers:{size:6,hover:{size:8}},title:{text:"",align:"left"},grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{type:"category"},yaxis:[{axisTicks:{show:!0},axisBorder:{show:!0,color:"#FF5733"},labels:{style:{colors:"#FF5733"}},title:{text:"Среднее время обслуживания и ожидания",style:{color:"#FF5733"}}}]},series:[{name:"series1",data:[31,40,28,51,42,109,100]},{name:"series2",data:[11,32,45,32,34,52,41]}]}),r=(0,E.KR)({options:{chart:{width:380,type:"pie"},labels:["Team A","Team B","Team C","Team D","Team E"],pie:{expandOnClick:!0},yaxis:{show:!1},title:{align:"center",offsetX:0,offsetY:85,floating:!0,style:{fontSize:"28px",fontWeight:"bold",color:"#263238"}},responsive:[{breakpoint:void 0,options:{chart:{offsetY:0}}}]},series:[44,55,13,43,22]}),c=async()=>{try{const e=await Ve(a.query.branch_id),t=e.data.data.data,l=6,s=t.map((e=>{const a=e.servicename.length>l?e.servicename.slice(0,l)+"...":e.servicename;return a}));n.value.updateOptions({series:t.map((e=>e.length)),chart:{type:"donut"},labels:t.map((e=>e.servicename)),dataLabels:{enabled:!0},colors:["#0d6efd","#20c997","#ffc107","#d63384","#6f42c1","#adb5bd"],legend:{formatter:function(e,a){const t=a.seriesIndex;return[s[t]," - ",a.w.globals.series[t]]},position:"top",horizontalAlign:"center"}})}catch(e){console.log(e)}},A=async()=>{try{const e=await Ue(a.query.branch_id);let s=e.data.data.peakHours.map((e=>({x:e.time,y:e.count,long_wait:e.WAITOVER,long_service:e.SERVOVER,bad_grades:e.BAD})));t.value.updateOptions({xaxis:{type:"category",categories:s.map((e=>e.x)),tickPlacement:"on"},series:[{name:"Количество билетов",data:s}],tooltip:{custom:function({series:e,dataPointIndex:a}){var t=s[a];return`<div class="tooltip-container">\n            <div class="tooltip-content">\n              <span class="tooltip-label">Количество билетов:</span>\n              <span class="tooltip-value">${e[0][a]}</span>\n            </div>\n            <div class="tooltip-content">\n              <span class="tooltip-label">Время:</span>\n              <span class="tooltip-value">${t.x}</span>\n            </div>\n           \n            <div class="tooltip-content">\n              <span class="tooltip-label">Долгое ожидание:</span>\n              <span class="tooltip-value">${t.long_wait}</span>\n            </div>\n            <div class="tooltip-content">\n              <span class="tooltip-label">Долгое обслуживание:</span>\n              <span class="tooltip-value">${t.long_service}</span>\n            </div>\n            <div class="tooltip-content">\n              <span class="tooltip-label">Плохие оценки:</span>\n              <span class="tooltip-value">${t.bad_grades}</span>\n            </div>\n           \n          </div>`}}});const n=e.data.data.averageServ,o=e.data.data.averageWait;let i=n.map((e=>({x:e.time,y:e.count})));l.value.updateOptions({series:[{name:"Среднее время обслуживания",data:i},{name:"Среднее время ожидания",data:o.map((e=>({x:e.time,y:e.count})))}],tooltip:{custom:function({series:e,dataPointIndex:a,w:t}){var l=i[a],s=`<div class="tooltip-container">\n        <div class="tooltip-content">\n          <span class="tooltip-label">Время:</span>\n          <span class="tooltip-value">${l.x}</span>\n        </div>`;return void 0!==e[0][a]&&(s+=`<div class="tooltip-content">\n          <span class="tooltip-label">Среднее время обслуживания:</span>\n          <span class="tooltip-value">${e[0][a]} мин</span>\n        </div>`),void 0!==e[1][a]&&(s+=`<div class="tooltip-content">\n          <span class="tooltip-label">Среднее время ожидания:</span>\n          <span class="tooltip-value">${e[1][a]} мин</span>\n        </div>`),s+="</div>",s}}})}catch(e){console.error("Error fetching data:",e)}};return(0,s.wB)((()=>a.query),(()=>{A(),c()})),(0,s.sV)((()=>{A(),c()})),(e,a)=>{const c=(0,s.g2)("apexchart");return(0,s.uX)(),(0,s.CE)("main",null,[(0,s.Lk)("div",va,[(0,s.Lk)("div",pa,[(0,s.Lk)("div",ma,[(0,s.bF)(c,{ref_key:"peakChart",ref:t,height:300,options:o.value.options,series:o.value.series},null,8,["options","series"])]),(0,s.Lk)("div",ga,[(0,s.bF)(c,{ref_key:"avgChart",ref:l,height:300,options:i.value.options,series:i.value.series},null,8,["options","series"])])]),(0,s.Lk)("div",ba,[(0,s.Lk)("div",ka,[(0,s.bF)(c,{ref_key:"serviceChart",ref:n,height:500,options:r.value.options,series:r.value.series},null,8,["options","series"])])])])])}}};const fa=(0,R.A)(ha,[["__scopeId","data-v-ae28ae48"]]);var ya=fa,La=t.p+"img/worker.7984e6bf.png",wa=t.p+"img/table.059ef33c.png",Ea=t.p+"img/table_transparent.863b9f46.png",xa=t.p+"img/client.58661fd7.png";const Ca={class:"table"},Ia={key:0,class:"operator"},_a={class:"operatorInfo text-sm"},Fa=["src"],Sa={class:"tableImg"},Ra=["src"],Ba={key:1,class:"client"},Da={class:"clientInfo text-sm"},Ka=["src"];var Xa={__name:"WindowComponent",props:{tableNumber:{type:String,required:!0},operatorName:{type:String,required:!1},isActive:{type:Boolean,required:!0},inService:{type:Boolean,required:!0},clientInfo:{type:String,required:!1},isClientAlarm:{type:Boolean,required:!1}},setup(e){const a=e;return(t,l)=>((0,s.uX)(),(0,s.CE)("div",Ca,[a.isActive?((0,s.uX)(),(0,s.CE)("div",Ia,[(0,s.Lk)("div",_a,(0,n.v_)(a.operatorName),1),(0,s.Lk)("img",{src:a.isActive?(0,E.R1)(La):2,alt:""},null,8,Fa)])):(0,s.Q3)("",!0),(0,s.Lk)("div",Sa,[(0,s.Lk)("div",{class:(0,n.C4)(["tableImgInfo",{active:a.isActive}]),style:(0,n.Tr)({backgroundColor:a.isClientAlarm?"#e02a1d":!a.isClientAlarm&&a.isActive?"#3ec72c":"#969190"})},(0,n.v_)(a.tableNumber),7),(0,s.Lk)("img",{src:a.isActive?(0,E.R1)(wa):(0,E.R1)(Ea),alt:""},null,8,Ra)]),a.inService?((0,s.uX)(),(0,s.CE)("div",Ba,[(0,s.Lk)("div",Da,(0,n.v_)(a.clientInfo),1),(0,s.Lk)("img",{src:e.inService?(0,E.R1)(xa):2,alt:""},null,8,Ka)])):(0,s.Q3)("",!0)]))}};const Qa=(0,R.A)(Xa,[["__scopeId","data-v-8fc878f2"]]);var Ta=Qa,ja=t.p+"img/waiting.2549a37c.png";const Va={class:"wait"},Ma={key:0,class:"red"},Ua={key:1,class:"green"},Oa=["src"];var qa={__name:"WaitingComponent",props:{waitover:{type:Boolean,required:!0}},setup(e){const a=e;return console.log(a.alarm),(e,t)=>((0,s.uX)(),(0,s.CE)("div",Va,[!0===a.waitover?((0,s.uX)(),(0,s.CE)("div",Ma)):((0,s.uX)(),(0,s.CE)("div",Ua)),(0,s.Lk)("img",{src:(0,E.R1)(ja),alt:""},null,8,Oa)]))}};const Na=(0,R.A)(qa,[["__scopeId","data-v-602b53fe"]]);var Pa=Na;const Wa=localStorage.getItem("authToken"),Ga=e=>{try{const a=G.A.get(`${O}/windows/${e}`,{headers:{bearer:Wa}});return a}catch(a){console.log(a)}},za=e=>((0,s.Qi)("data-v-c543b4f0"),e=e(),(0,s.jt)(),e),$a={class:"mon-container"},Ya={class:"inputBlock"},Ha=za((()=>(0,s.Lk)("option",{selected:"",disabled:"",value:"0"},"Выберите филиал",-1))),Ja=["value"],Za=["disabled"],et=za((()=>(0,s.Lk)("option",{selected:"",disabled:"",value:"0"},"Выберите отделение",-1))),at=["value"],tt={class:"live"},lt={class:"indicators flex"},st={class:"clientIndicator m-2 w-full"},nt={class:"inserviceClient p-2"},ot={class:"waitClient p-2"},it={class:"operatorIndicator m-2 w-full flex justify-center items-center"},rt={class:"onlineOperator p-2"},ct={key:0,class:"windows"},At={class:"waits"},dt={class:"tables"},ut={class:"data-table"};var vt={__name:"MonitoringMain",setup(e){const a=(0,w.lq)(),t=(0,E.KR)(null),o=(0,E.KR)(0),i=(0,E.KR)(0),r=(0,E.KR)(""),c=[{align:"center",key:"winno",sortable:!1,title:"Номер окна"},{key:"operatorId",title:"Id оператора",align:"center"},{key:"active",title:"Активен",align:"center"},{key:"worktitle",title:"Название услуги",align:"center"},{key:"name",title:"Ф.И.О",align:"center"}],A=(0,E.KR)([]),d=(0,E.KR)([]),u=(0,E.KR)(0),v=(0,E.KR)({inservice:0,wait:0,online:0}),p=async()=>{t.value=await ae()},m=async()=>{try{const e=await Ga(i.value);A.value=e.data.windows,v.value.inservice=e.data.INSERVICE,v.value.wait=e.data.NEW.length,d.value=e.data.windows,u.value=e.data.NEW,e.data.windows.map((e=>{0!==e.operatorId&&v.value.online++})),console.log(u.value)}catch(e){console.log(e)}},g=(0,s.EW)((()=>A.value.map((e=>({...e,active:!0===e.active?"Да":"Нет",worktitle:"null"===e.worktitle?"Нет":e.worktitle}))).sort(((e,a)=>e.starttime-a.starttime)))),b=()=>{try{const e=A.value.map((e=>({"Номер окна":e.winno,"Id оператора":e.operatorId,"Активен":!0===e.active?"Да":"Нет","Название услуги":e.worktitle,"Ф.И.О":e.name}))),a=k(e),t=new Blob(["\ufeff",a],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.href=window.URL.createObjectURL(t),l.download="data.csv",l.click()}catch(e){console.log(e)}},k=e=>{const a=Object.keys(e[0]).join(","),t=e.map((e=>Object.values(e).join(",")));return`${a}\n${t.join("\n")}`};return(0,s.wB)((()=>a.query),(()=>{if(!a.query.branch_id)return o.value=0,i.value=0,A.value=[],void(d.value=[]);o.value=t.value.find((e=>1*e.F_ID===1*a.query.parent_branch)),i.value=a.query.branch_id,m()})),(0,s.sV)((()=>{p()})),(e,a)=>{const A=(0,s.g2)("v-btn"),p=(0,s.g2)("v-text-field"),k=(0,s.g2)("v-data-table"),h=(0,s.g2)("v-card");return(0,s.uX)(),(0,s.CE)("div",$a,[(0,s.Lk)("div",Ya,[(0,s.bo)((0,s.Lk)("select",{class:"form-select","onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e)},[Ha,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e},(0,n.v_)(e.F_NAME),9,Ja)))),128))],512),[[l.u1,o.value]]),(0,s.bo)((0,s.Lk)("select",{disabled:!o.value,class:"form-select","onUpdate:modelValue":a[1]||(a[1]=e=>i.value=e),onChange:a[2]||(a[2]=e=>m())},[et,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.value.children,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.F_ID,value:e.F_ID},(0,n.v_)(e.F_NAME),9,at)))),128))],40,Za),[[l.u1,i.value]])]),(0,s.Lk)("div",tt,[(0,s.Lk)("div",lt,[(0,s.Lk)("div",st,[(0,s.Lk)("div",nt,[(0,s.Lk)("h5",null,"Количество обслуживающихся клиентов: "+(0,n.v_)(v.value.inservice),1)]),(0,s.Lk)("div",ot,[(0,s.Lk)("h5",null,"Количество ожидающих клиентов: "+(0,n.v_)(v.value.wait),1)])]),(0,s.Lk)("div",it,[(0,s.Lk)("div",rt,[(0,s.Lk)("h5",null,"Количество операторов в сети: "+(0,n.v_)(v.value.online),1)])])]),t.value?((0,s.uX)(),(0,s.CE)("div",ct,[(0,s.Lk)("div",At,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,(e=>((0,s.uX)(),(0,s.Wv)(Pa,{key:e.id,waitover:"true"===e.waitover},null,8,["waitover"])))),128))]),(0,s.Lk)("div",dt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,(e=>((0,s.uX)(),(0,s.Wv)(Ta,{key:e.id,"table-number":e.winno,"operator-name":e.name,"is-active":0!==e.operatorId,"in-service":0!==e.INSERVICE.length,"is-client-alarm":e.INSERVICE[0]?.servover,"client-info":0!==e.INSERVICE.length?e.INSERVICE[0].servicename:null},null,8,["table-number","operator-name","is-active","in-service","is-client-alarm","client-info"])))),128))])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",ut,[i.value?((0,s.uX)(),(0,s.Wv)(A,{key:0,class:"m-2",onClick:a[3]||(a[3]=e=>b())},{default:(0,s.k6)((()=>[(0,s.eW)("Скачать")])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(h,{title:"Окна",flat:""},{text:(0,s.k6)((()=>[(0,s.bF)(p,{modelValue:r.value,"onUpdate:modelValue":a[4]||(a[4]=e=>r.value=e),label:"Искать","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"])])),default:(0,s.k6)((()=>[(0,s.bF)(k,{headers:c,items:g.value,search:r.value,"no-data-text":"Нет доступых данных","items-per-page-text":"Элементов на странице"},null,8,["items","search"])])),_:1})])])}}};const pt=(0,R.A)(vt,[["__scopeId","data-v-c543b4f0"]]);var mt=pt,gt={__name:"MonitoringView",setup(e){return(e,a)=>((0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(mt)]))}};const bt=gt;var kt=bt;const ht=async e=>{try{const a=await G.A.get(`${O}/employees/${e}`,{headers:{bearer:localStorage.getItem("authToken")}});return a.data.data}catch(a){console.log(a)}},ft=e=>((0,s.Qi)("data-v-d560bfb4"),e=e(),(0,s.jt)(),e),yt={class:"employee-container"},Lt={class:"mainBlock"},wt={class:"inputBlock"},Et=ft((()=>(0,s.Lk)("option",{selected:"",disabled:"",value:"0"},"Выберите филиал",-1))),xt=["value"],Ct=["disabled"],It=ft((()=>(0,s.Lk)("option",{selected:"",disabled:"",value:"0"},"Выберите отделение",-1))),_t=["value"],Ft={key:0,class:"employee-chart"},St={class:"empl-data"};var Rt={__name:"EmployeeRate",setup(e){const a=(0,E.KR)(null),t=(0,E.KR)(0),o=(0,E.KR)(0),i=(0,w.lq)(),r=[{align:"center",key:"F_BRANCH_ID",sortable:!1,title:"ID отделения"},{key:"F_DESCR",title:"Описание",align:"center"},{key:"F_ID",title:"ID оператора",align:"center"},{key:"F_NAME",title:"Ф.И.О",align:"center"},{key:"timeDifference",title:"Время",align:"center"},{key:"startTime",title:"Время начала работы",align:"center"}],c=(0,E.KR)([]),A=(0,E.KR)(null),d=(0,E.KR)({options:{chart:{type:"bar",height:350},plotOptions:{bar:{borderRadius:4,horizontal:!0}},dataLabels:{enabled:!0,offsetX:-60,formatter:function(e){return p(e)}},xaxis:{categories:["South Korea","Canada","United Kingdom","Netherlands","Italy","France","Japan","United States","China","Germany"]},yaxis:{labels:{maxWidth:500}}},series:[{data:[400,430,448,470,540,580,690,1100,1200,1380]}]}),u=async()=>{a.value=await ae()},v=async()=>{c.value=await ht(o.value);const e=c.value.map((function(e){return{name:e.F_NAME,status:e.timeDifference?"Онлайн":"Оффлайн",value:e.timeDifference}})),a=e.map((function(e){return{x:e.name+" - "+e.status,y:e.value}}));A.value.updateOptions({xaxis:{categories:a.map((function(e){return e.x}))},series:[{name:"Показатели",data:a}]})},p=e=>{const a=Math.floor(e/36e5),t=Math.floor(e%36e5/6e4),l=Math.floor(e%6e4/1e3);return`${a}ч. ${t}м. ${l}сек.`},m=()=>{try{const e=c.value.map((e=>{const a=1*e.startTime;return{"ID отделения":e.F_BRANCH_ID,"Описание":e.F_DESCR,"ID оператора":e.F_ID,"Ф.И.О":e.F_NAME,"Время":p(e.timeDifference),"Время начала работы":0!==e.timeDifference?new Date(a).toLocaleString("ru-RU"):"Оффлайн"}})),a=g(e),t=new Blob(["\ufeff",a],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.href=window.URL.createObjectURL(t),l.download="data.csv",l.click()}catch(e){console.log(e)}},g=e=>{const a=Object.keys(e[0]).join(","),t=e.map((e=>Object.values(e).join(",")));return`${a}\n${t.join("\n")}`},b=(0,s.EW)((()=>c.value.map((e=>{const a=1*e.startTime;return{...e,timeDifference:p(e.timeDifference),startTime:0!==e.timeDifference?new Date(a).toLocaleString("ru-RU"):"Оффлайн",F_DESCR:"null"===e.F_DESCR?"Нет":e.F_DESCR}})).sort(((e,a)=>e.starttime-a.starttime))));return(0,s.wB)((()=>i.query),(()=>{if(!i.query.branch_id)return t.value=0,o.value=0,void(c.value=[]);t.value=a.value.find((e=>1*e.F_ID===1*i.query.parent_branch)),o.value=i.query.branch_id,v()})),(0,s.sV)((()=>{u()})),(e,i)=>{const c=(0,s.g2)("apexchart"),u=(0,s.g2)("v-btn"),p=(0,s.g2)("v-text-field"),g=(0,s.g2)("v-data-table"),k=(0,s.g2)("v-card");return(0,s.uX)(),(0,s.CE)("div",yt,[(0,s.Lk)("div",Lt,[(0,s.Lk)("div",wt,[(0,s.bo)((0,s.Lk)("select",{class:"form-select","onUpdate:modelValue":i[0]||(i[0]=e=>t.value=e)},[Et,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e},(0,n.v_)(e.F_NAME),9,xt)))),128))],512),[[l.u1,t.value]]),(0,s.bo)((0,s.Lk)("select",{disabled:!t.value,class:"form-select","onUpdate:modelValue":i[1]||(i[1]=e=>o.value=e),onChange:v},[It,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value.children,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.F_ID,value:e.F_ID},(0,n.v_)(e.F_NAME),9,_t)))),128))],40,Ct),[[l.u1,o.value]])]),o.value?((0,s.uX)(),(0,s.CE)("div",Ft,[(0,s.bF)(c,{ref_key:"chart",ref:A,height:"800",options:d.value.options,series:d.value.series},null,8,["options","series"])])):(0,s.Q3)("",!0),(0,s.Lk)("div",St,[o.value?((0,s.uX)(),(0,s.Wv)(u,{key:0,class:"m-2",onClick:i[2]||(i[2]=e=>m())},{default:(0,s.k6)((()=>[(0,s.eW)("Скачать")])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(k,{title:"Сотрудники",flat:""},{text:(0,s.k6)((()=>[(0,s.bF)(p,{modelValue:e.search,"onUpdate:modelValue":i[3]||(i[3]=a=>e.search=a),label:"Search","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"])])),default:(0,s.k6)((()=>[(0,s.bF)(g,{headers:r,items:b.value,search:e.search,"no-data-text":"Нет доступых данных","items-per-page-text":"Элементов на странице"},null,8,["items","search"])])),_:1})])])])}}};const Bt=(0,R.A)(Rt,[["__scopeId","data-v-d560bfb4"]]);var Dt=Bt;const Kt=localStorage.getItem("authToken"),Xt=async(e,a,t,l)=>{try{let s=new URLSearchParams({page:e,limit:100,filter:"bad-rate"===a?"bad":"wait"===a?"wait":"serv"===a?"serv":void 0});a||(s=new URLSearchParams({page:e,limit:100}));let n=l?`${O}/tickets/list/${l}`:t?`${O}/tickets/list/${t}`:`${O}/tickets/list`;n+=`?${s.toString()}`;const o=await G.A.get(n,{headers:{bearer:Kt}});return o}catch(s){console.log(s)}},Qt=async()=>{const e=`${O}/tickets/download`;try{const a=await G.A.get(e,{headers:{bearer:Kt},responseType:"blob"}),t=window.URL.createObjectURL(new Blob([a.data])),l=document.createElement("a");l.href=t,l.setAttribute("download","generated_data.xlsx"),document.body.appendChild(l),l.click(),document.body.removeChild(l)}catch(a){console.log(a)}},Tt={class:"ticket-container"},jt={class:"ticketMain"},Vt={class:"filter block"},Mt={class:"pagi"},Ut={class:"text-center"};var Ot={__name:"TicketsView",setup(e){const a=(0,E.KR)(""),t=(0,E.KR)({pageCount:1,pageNumber:1}),l=[{align:"center",key:"iin",sortable:!1,title:"ИИН"},{align:"center",key:"ticketno",title:"Номер билета"},{align:"center",key:"servicename",title:"Название услуги"},{align:"center",key:"idbranch",title:"Отделение"},{align:"center",key:"operator",title:"Оператор"},{align:"center",key:"state",title:"Статус"},{align:"center",key:"starttime",title:"Время регистрации"},{align:"center",key:"startservtime",title:"Время обслуживания"},{align:"center",key:"rating",title:"Оценка"},{align:"center",key:"waitover",title:"Превышение времени ожидания"},{align:"center",key:"servover",title:"Превышение времени обслуживания"}],n=(0,E.KR)([]),o=(0,w.lq)(),i=(0,w.rd)(),r=async e=>{try{const a=await Xt(t.value.pageNumber,e,o.query.parent_branch,o.query.branch_id);t.value.pageCount=a.data.pages,n.value=a.data.data.tickets}catch(a){console.error(a)}},c=async()=>{try{const e=await Xt(t.value.pageNumber);t.value.pageCount=e.data.pages,t.value.pageNumber=1,n.value=e.data.data.tickets,i.push({...i.currentRoute.value,query:{}})}catch(e){console.error(e)}};(0,s.wB)((()=>t.value.pageNumber),(()=>{r()})),(0,s.wB)((()=>o.query),(()=>{r()}));const A=(0,s.EW)((()=>n.value.map((e=>({...e,starttime:new Date(e.starttime).toLocaleString("ru-RU"),startservtime:new Date(e.startservtime).toLocaleString("ru-RU"),rating:"5"===e.rating?"Отлично":"4"===e.rating?"Хорошо":"4"===e.rating?"Плохо":"Нет оценки",waitover:"true"===e.waitover?"Да":"Нет",servover:"true"===e.servover?"Да":"Нет",state:"COMPLETED"===e.state?"Обслужен":"NEW"===e.state?"Ожидает":"INSERVICE"===e.state?"Обслуживается":"Бронь",idbranch:e.idbranch}))).sort(((e,a)=>e.starttime-a.starttime)))),d=async()=>{try{await Qt()}catch(e){console.error("Error downloading Excel:",e)}};return(0,s.sV)((()=>{r()})),(e,n)=>{const o=(0,s.g2)("v-pagination"),i=(0,s.g2)("v-data-table"),u=(0,s.g2)("v-card");return(0,s.uX)(),(0,s.CE)("div",Tt,[(0,s.Lk)("div",jt,[(0,s.Lk)("div",Vt,[(0,s.Lk)("button",{class:"btn btn-primary",onClick:n[0]||(n[0]=e=>c())},"Все билеты"),(0,s.Lk)("button",{class:"btn btn-primary",onClick:n[1]||(n[1]=e=>d())},"Скачать"),(0,s.Lk)("button",{class:"btn btn-warning",onClick:n[2]||(n[2]=e=>r("bad-rate"))},"Плохие оценки"),(0,s.Lk)("button",{class:"btn btn-warning",onClick:n[3]||(n[3]=e=>r("serv"))}," Перевышение времени обслуживания "),(0,s.Lk)("button",{class:"btn btn-warning",onClick:n[4]||(n[4]=e=>r("wait"))},"Перевышение времени ожидания")]),(0,s.Lk)("div",Mt,[(0,s.Lk)("div",Ut,[(0,s.bF)(o,{modelValue:t.value.pageNumber,"onUpdate:modelValue":n[5]||(n[5]=e=>t.value.pageNumber=e),length:t.value.pageCount,"total-visible":10},null,8,["modelValue","length"])])]),(0,s.bF)(u,{title:"Талоны",flat:""},{default:(0,s.k6)((()=>[(0,s.bF)(i,{headers:l,items:A.value,search:a.value,"hide-default-footer":!0,"no-data-text":"Нет билетов","items-per-page-text":"Билетов на странице"},null,8,["items","search"])])),_:1})])])}}};const qt=(0,R.A)(Ot,[["__scopeId","data-v-9752e950"]]);var Nt=qt;const Pt=localStorage.getItem("authToken"),Wt=async()=>{try{const e=await(0,G.A)(`${O}/messages`,{headers:{bearer:Pt}}),a=e.data.data.message;return a.map((e=>{const a=new Date(e.created_at);e.created_at=a.toLocaleDateString("RU-ru")+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()})),a}catch(e){console.log(e)}},Gt=async()=>{const e=await G.A.get(`${O}/users/users/last`,{headers:{bearer:Pt}}),a=e.data.data.users;return a},zt=async e=>{try{return await G.A.post(`${O}/messages`,{txt:e},{headers:{bearer:Pt}}),!0}catch(a){return console.log(a),!1}},$t=e=>((0,s.Qi)("data-v-045257ae"),e=e(),(0,s.jt)(),e),Yt={class:"chat-container"},Ht={class:"chat-left"},Jt={class:"chat"},Zt={class:"inner"},el={class:"messages"},al={class:"userImg m-1 h-full"},tl=$t((()=>(0,s.Lk)("img",{src:T,class:"rounded-full",width:"50px",alt:""},null,-1))),ll={class:"login m-2"},sl={class:"msg p-2 m-1 w-full h-full"},nl={class:"msg-body text-left bg-gray-100 rounded-lg p-2 text-sm"},ol={class:"msg-date text-sm"},il={class:"send-mess"},rl={class:"input-group"},cl={class:"form-floating"},Al=$t((()=>(0,s.Lk)("label",{for:"floatingTextarea"},"Сообщение...",-1))),dl={class:"right-chat"},ul={class:"pieChart"},vl={class:"last-container p-3"},pl=$t((()=>(0,s.Lk)("div",{class:"title m-2"},[(0,s.Lk)("h5",null,"Последние заходившие")],-1))),ml={class:"flex overflow-x-auto space-x-8 w-full"},gl={class:"text-sm"},bl=$t((()=>(0,s.Lk)("span",{class:"flex justify-center items-center"},[(0,s.Lk)("img",{src:T,class:"h-24 w-24 rounded-full border-2",alt:""})],-1))),kl={class:"text-sm"};var hl={__name:"ChatView",setup(e){const a=(0,E.KR)({options:{chart:{width:300,type:"pie"},labels:["Доступно","Нет связи","Не используется","Потеряна связь"],colors:["#13ad02","#fc0f03","#ada5a5","#d9e00d"],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{show:!1,position:"top"}}}]},series:[44,55,13,43]}),t=(0,E.KR)([]),o=(0,E.KR)([]),i=(0,E.KR)(""),r=async()=>{t.value=await Wt()},c=async()=>{o.value=await Gt()},A=async()=>{const e=await ae();let t=0,l=0;e.map((e=>{e.children.map((e=>{1===e.ONN?t++:l++}))})),a.value.series=[t,l,0,0]},d=async()=>{if(!i.value)return alert("Заполните поле");try{const e=await zt(i.value);if(e){const e={user_login:localStorage.getItem("login"),message_txt:i.value,created_at:(new Date).toLocaleString("RU-ru")};t.value.push(e),i.value=""}}catch(e){console.log(e)}};return(0,s.sV)((()=>{r(),c(),A()})),(e,r)=>{const c=(0,s.g2)("apexchart");return(0,s.uX)(),(0,s.CE)("main",null,[(0,s.Lk)("div",Yt,[(0,s.Lk)("div",Ht,[(0,s.Lk)("div",Jt,[(0,s.Lk)("div",Zt,[(0,s.Lk)("div",el,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"message flex shadow-md rounded-xl mx-auto my-3"},[(0,s.Lk)("div",al,[tl,(0,s.Lk)("div",ll,(0,n.v_)(e.user_login),1)]),(0,s.Lk)("div",sl,[(0,s.Lk)("div",nl,(0,n.v_)(e.message_txt),1),(0,s.Lk)("div",ol,(0,n.v_)(e.created_at),1)])])))),128))]),(0,s.Lk)("div",il,[(0,s.Lk)("div",rl,[(0,s.Lk)("div",cl,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":r[0]||(r[0]=e=>i.value=e),class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea"},null,512),[[l.Jo,i.value]]),Al]),(0,s.Lk)("button",{onClick:d,class:"btn btn-primary"},"Отправить")])])])])]),(0,s.Lk)("div",dl,[(0,s.Lk)("div",ul,[(0,s.bF)(c,{height:400,options:a.value.options,series:a.value.series},null,8,["options","series"])]),(0,s.Lk)("div",vl,[pl,(0,s.Lk)("div",ml,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.value,(e=>((0,s.uX)(),(0,s.CE)("section",{key:e.id,class:"flex-shrink-0 rounded-full"},[(0,s.Lk)("span",gl,(0,n.v_)(e.sign_in_date),1),bl,(0,s.Lk)("span",kl,(0,n.v_)(e.login),1)])))),128))])])])])])}}};const fl=(0,R.A)(hl,[["__scopeId","data-v-045257ae"]]);var yl=fl;const Ll=e=>((0,s.Qi)("data-v-0b4a391a"),e=e(),(0,s.jt)(),e),wl={class:"server-container"},El={class:"server-container"},xl={class:"controls flex text-white"},Cl={class:"control"},Il={class:"control"},_l={class:"control"},Fl={class:"drop"},Sl=Ll((()=>(0,s.Lk)("div",{class:"title-drop"},[(0,s.Lk)("div",null,"Название"),(0,s.Lk)("div",{class:"text-center"},"Статус"),(0,s.Lk)("div",null,"Количество доступных/всего")],-1))),Rl=["onClick"],Bl={class:"notfold"},Dl={class:"item-name"},Kl=Ll((()=>(0,s.Lk)("i",{class:"fa-solid fa-plus mx-4"},null,-1))),Xl=Ll((()=>(0,s.Lk)("div",{class:"item-status"},null,-1))),Ql={class:"item-amount"},Tl={key:0,class:"unfold"},jl={class:"unfold-name"},Vl={key:0,class:"unfold-status text-green-600"},Ml=Ll((()=>(0,s.Lk)("i",null,(0,n.v_)("Доступно"),-1))),Ul=[Ml],Ol={key:1,class:"unfold-status text-red-600"},ql=Ll((()=>(0,s.Lk)("i",null,(0,n.v_)("Нет соединения"),-1))),Nl=[ql],Pl=Ll((()=>(0,s.Lk)("div",{class:"unfold-amount"},null,-1)));var Wl={__name:"ServersView",setup(e){const a=(0,E.KR)([]),t=e=>{const t=a.value.find((a=>a.id===e));t.fold=!t.fold},l=async e=>{a.value=await ae(e),a.value.map((a=>{let t=0;a.children.forEach((e=>{1===e.ONN&&(t+=1)})),a.onlineSize=t,a.fold=!!e}))};return(0,s.sV)((()=>{l()})),(e,o)=>((0,s.uX)(),(0,s.CE)("div",wl,[(0,s.Lk)("div",El,[(0,s.Lk)("div",xl,[(0,s.Lk)("div",Cl,[(0,s.Lk)("button",{type:"button",onClick:o[0]||(o[0]=e=>l()),class:"btn btn-secondary"}," Все ")]),(0,s.Lk)("div",Il,[(0,s.Lk)("button",{type:"button",onClick:o[1]||(o[1]=e=>l("online")),class:"btn btn-success"}," Доступные ")]),(0,s.Lk)("div",_l,[(0,s.Lk)("button",{type:"button",onClick:o[2]||(o[2]=e=>l("offline")),class:"btn btn-danger"}," Недоступные ")])]),(0,s.Lk)("div",Fl,[Sl,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,onClick:a=>t(e.id),class:"drop-item"},[(0,s.Lk)("div",Bl,[(0,s.Lk)("div",Dl,[Kl,(0,s.eW)(" "+(0,n.v_)(e.F_NAME),1)]),Xl,(0,s.Lk)("div",Ql,(0,n.v_)(e.onlineSize)+"/"+(0,n.v_)(e.children.length),1)]),e.fold?((0,s.uX)(),(0,s.CE)("div",Tl,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.children,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"unfold-item",key:e.id},[(0,s.Lk)("div",jl,(0,n.v_)(e.F_NAME),1),1===e.ONN?((0,s.uX)(),(0,s.CE)("div",Vl,Ul)):((0,s.uX)(),(0,s.CE)("div",Ol,Nl)),Pl])))),128))])):(0,s.Q3)("",!0)],8,Rl)))),128))])])]))}};const Gl=(0,R.A)(Wl,[["__scopeId","data-v-0b4a391a"]]);var zl=Gl;const $l=e=>((0,s.Qi)("data-v-338e1a55"),e=e(),(0,s.jt)(),e),Yl={class:"user-container"},Hl=$l((()=>(0,s.Lk)("h3",null,"Пользователи",-1))),Jl=$l((()=>(0,s.Lk)("button",{type:"button",class:"btn btn-primary float-left text-white","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Добавить ",-1))),Zl={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},es={class:"modal-dialog"},as={class:"modal-content"},ts=$l((()=>(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Создание пользователя"),(0,s.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),ls={class:"modal-body"},ss={class:"form-floating mb-3"},ns=$l((()=>(0,s.Lk)("label",{for:"floatingInput"},"Имя пользователя",-1))),os={class:"form-floating"},is=$l((()=>(0,s.Lk)("label",{for:"floatingPassword"},"Пароль",-1))),rs={class:"form-floating mb-3"},cs=$l((()=>(0,s.Lk)("label",{for:"floatingInput"},"Отделения",-1))),As={class:"modal-footer"},ds=$l((()=>(0,s.Lk)("button",{type:"button",class:"btn btn-secondary text-white","data-bs-dismiss":"modal"},"Закрыть",-1))),us={class:"users"};var vs={__name:"UsersView",setup(e){const a=(0,E.KR)(""),t=(0,E.KR)([{key:"action",title:"Действия",align:"center",sortable:!1},{align:"center",key:"login",title:"Имя пользователя"},{key:"password",title:"Пароль",align:"center"},{key:"firstname",title:"Имя",align:"center"},{key:"lastname",title:"Фамилия",align:"center"},{key:"id_branch",title:"Отделения",align:"center"},{key:"ins_date",title:"Дата добавления",align:"center"},{key:"sign_in_date",title:"Дата последнего посещения",align:"center"}]),o=(0,E.KR)([]),i=(0,E.KR)({username:"",password:"",id_branch:""}),r=async()=>{const e=await Z();console.log(e.data.data);const a=e.data.data.users;o.value=a},c=async e=>{const a=await H(e);o.value=o.value.filter((a=>a.id!==e)),console.log(a)},A=async()=>{await J(i.value),o.value.push(i.value),i.value={username:"",password:"",id_branch:""}};return(0,s.sV)((()=>{r()})),(e,r)=>{const d=(0,s.g2)("butto"),u=(0,s.g2)("v-text-field"),v=(0,s.g2)("v-btn"),p=(0,s.g2)("v-data-table"),m=(0,s.g2)("v-card");return(0,s.uX)(),(0,s.CE)("main",null,[(0,s.Lk)("div",Yl,[Hl,Jl,(0,s.Lk)("div",Zl,[(0,s.Lk)("div",es,[(0,s.Lk)("div",as,[ts,(0,s.Lk)("div",ls,[(0,s.Lk)("div",ss,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>i.value.username=e),type:"text",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[l.Jo,i.value.username]]),ns]),(0,s.Lk)("div",os,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":r[1]||(r[1]=e=>i.value.password=e),type:"password",class:"form-control",id:"floatingPassword",placeholder:"Password"},null,512),[[l.Jo,i.value.password]]),is]),(0,s.Lk)("div",rs,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":r[2]||(r[2]=e=>i.value.id_branch=e),type:"text",class:"form-control",id:"floatingInput"},null,512),[[l.Jo,i.value.id_branch]]),cs])]),(0,s.Lk)("div",As,[ds,(0,s.bF)(d,{onClick:r[3]||(r[3]=e=>A()),type:"button",class:"btn btn-primary text-white"},{default:(0,s.k6)((()=>[(0,s.eW)("Создать")])),_:1})])])])]),(0,s.Lk)("div",us,[(0,s.bF)(m,{flat:"",title:""},{text:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:a.value,"onUpdate:modelValue":r[4]||(r[4]=e=>a.value=e),label:"Искать","prepend-inner-icon":"mdi-magnify","single-line":"",variant:"outlined","hide-details":""},null,8,["modelValue"])])),default:(0,s.k6)((()=>[(0,s.bF)(p,{headers:t.value,items:o.value,search:a.value},{item:(0,s.k6)((({item:e})=>[(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,[(0,s.bF)(v,{class:"w-24",fab:"",dark:"",small:"",color:"red",onClick:a=>c(e.id)},{default:(0,s.k6)((()=>[(0,s.eW)("Удалить")])),_:2},1032,["onClick"])]),(0,s.Lk)("td",null,(0,n.v_)(e.login),1),(0,s.Lk)("td",null,(0,n.v_)(e.password),1),(0,s.Lk)("td",null,(0,n.v_)(e.firstname),1),(0,s.Lk)("td",null,(0,n.v_)(e.lastname),1),(0,s.Lk)("td",null,(0,n.v_)(e.id_branch),1),(0,s.Lk)("td",null,(0,n.v_)(e.ins_date),1),(0,s.Lk)("td",null,(0,n.v_)(e.sign_in_date),1)])])),_:1},8,["headers","items","search"])])),_:1})])])])}}};const ps=(0,R.A)(vs,[["__scopeId","data-v-338e1a55"]]);var ms=ps;const gs=e=>((0,s.Qi)("data-v-51c7bdda"),e=e(),(0,s.jt)(),e),bs={class:"server-container"},ks={class:"server-container"},hs={class:"drop"},fs=gs((()=>(0,s.Lk)("div",{class:"title-drop"},[(0,s.Lk)("div",null,"Название"),(0,s.Lk)("div",{class:"text-center"},"Меню"),(0,s.Lk)("div",{class:"text-center"},"Действие блок")],-1))),ys={class:"notfold"},Ls=["onClick"],ws=gs((()=>(0,s.Lk)("i",{class:"fas fa-plus mx-4"},null,-1))),Es={class:"item-amount w-2/6"},xs={key:0,class:"form-switch"},Cs=["onChange","disabled","checked"],Is=gs((()=>(0,s.Lk)("label",{class:"form-check-label mx-4",for:"flexSwitchCheckChecked"},"Блокировка меню",-1))),_s={key:0,class:"unfold"},Fs={class:"unfold-name"},Ss={class:"unfold-amount"},Rs=["onUpdate:modelValue","onChange","disabled"],Bs=["selected"],Ds=["selected"],Ks={class:"form-switch"},Xs=["onChange","disabled","checked"],Qs=gs((()=>(0,s.Lk)("label",{class:"form-check-label mx-4",for:"flexSwitchCheckChecked"},"Блокировка меню",-1))),Ts=gs((()=>(0,s.Lk)("div",{class:"changer-chart"},null,-1)));var js={__name:"ChangerMenu",setup(e){const a=(0,j.Pj)(),t=(0,E.KR)([]),o=(0,E.KR)(!0),i="10.0.71.46",r="4000",c=e=>{const a=t.value.find((a=>a.id===e));a.fold=!a.fold},A=async()=>{const e=await ae();t.value=e,t.value=t.value.map((e=>{e.children.length>1&&(o.value=!1);const a=1*localStorage.getItem("role"),t=e.blocked_by,l=e.blocked;return e.isSwitchable=1!==l||(2!==a||0!==t)&&(3!==a||2!==t),e.children.map((e=>{const t=e.blocked_by,l=e.blocked;e.isAvailable=!1,e.menu="first",e.isSwitchable=1!==l||(2!==a||0!==t)&&((3!==a||2!==t)&&(3!==a||0!==t))})),e}));try{const e=await G.A.get(`http://${i}:${r}/api/v1/branch-list`,{headers:{bearer:localStorage.getItem("authToken")}});t.value.map((a=>{a.children.map((a=>{const t=e.data.find((e=>e.branchId===a.F_ID));t&&(a.isAvailable=!0,a.menu=t.brtype)}))}))}catch(a){console.log(a)}},d=async(e,a)=>{let l=`http://${i}:${r}/api/v1/branch-list/block/${e}`;l+=1===a?"?value=0":"?value=1",t.value.map((a=>{a.F_ID===e&&a.children.map((e=>{e.isAvailable=!e.isAvailable,e.isSwitchable=!e.isSwitchable,e.blocked=0===e.blocked?1:0}))}));const s=localStorage.getItem("authToken");try{await G.A.post(l,null,{headers:{bearer:s}})}catch(n){console.log(n)}},u=()=>a.getters.username,v=async(e,a)=>{const t=`http://${i}:${r}/api/v1/branch-list/${e}`;try{await G.A.post(t,{menuValue:a},{headers:{bearer:localStorage.getItem("authToken")}})}catch(l){console.log(l)}};return(0,s.KC)((()=>{console.log(u()),A()})),(e,a)=>((0,s.uX)(),(0,s.CE)("div",bs,[(0,s.Lk)("div",ks,[(0,s.Lk)("div",hs,[fs,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"drop-item"},[(0,s.Lk)("div",ys,[(0,s.Lk)("div",{onClick:a=>c(e.id),class:"item-name w-4/6"},[ws,(0,s.eW)(" "+(0,n.v_)(e.F_NAME),1)],8,Ls),(0,s.Lk)("div",Es,[o.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",xs,[(0,s.Lk)("input",{onChange:a=>d(e.F_ID,e.blocked),disabled:!1===e.isSwitchable,class:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckChecked",checked:1===e.blocked},null,40,Cs),Is]))])]),e.fold?((0,s.uX)(),(0,s.CE)("div",_s,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.children,(a=>((0,s.uX)(),(0,s.CE)("div",{class:"unfold-item",key:a.id},[(0,s.Lk)("div",Fs,(0,n.v_)(a.F_NAME),1),(0,s.Lk)("div",Ss,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e=>a.menu=e,onChange:e=>v(a.F_ID,a.menu),disabled:1===e.blocked||!a.isSwitchable||!a.isAvailable,class:"form-select","aria-label":"Default select example"},[(0,s.Lk)("option",{value:"first",selected:"first"===a.menu}," Автоматическое ",8,Bs),(0,s.Lk)("option",{value:"second",selected:"second"===a.meny},"Меню-2",8,Ds)],40,Rs),[[l.u1,a.menu]])]),(0,s.Lk)("div",Ks,[(0,s.Lk)("input",{onChange:e=>d(a.F_ID,a.blocked),class:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckChecked",disabled:1===e.blocked||!1===a.isSwitchable,checked:1===e.blocked||!1===a.isSwitchable},null,40,Xs),Qs])])))),128))])):(0,s.Q3)("",!0)])))),128))]),Ts])]))}};const Vs=(0,R.A)(js,[["__scopeId","data-v-51c7bdda"]]);var Ms=Vs;const Us=e=>((0,s.Qi)("data-v-a259d37c"),e=e(),(0,s.jt)(),e),Os={class:"server-container"},qs={class:"server-container"},Ns={class:"drop"},Ps=["onClick"],Ws={class:"item-name"},Gs=Us((()=>(0,s.Lk)("i",{class:"fa-solid fa-plus mx-4"},null,-1))),zs=Us((()=>(0,s.Lk)("div",{class:"item-status"},null,-1))),$s=Us((()=>(0,s.Lk)("div",{class:"item-amount"},null,-1))),Ys={key:0,class:"unfold"},Hs={class:"unfold-name"},Js=Us((()=>(0,s.Lk)("div",{class:"unfold-amount"},[(0,s.Lk)("button",{type:"button",class:"btn btn-success text-white"},"Подключиться")],-1)));var Zs={__name:"CameraView",setup(e){const a=(0,E.KR)([]),t=e=>{const t=a.value.find((a=>a.id===e));t.fold=!t.fold},l=async()=>{a.value=ae()};return(0,s.sV)((()=>{l()})),(e,l)=>((0,s.uX)(),(0,s.CE)("div",Os,[(0,s.Lk)("div",qs,[(0,s.Lk)("div",Ns,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"drop-item"},[(0,s.Lk)("div",{class:"notfold",onClick:a=>t(e.id)},[(0,s.Lk)("div",Ws,[Gs,(0,s.eW)(" "+(0,n.v_)(e.F_NAME),1)]),zs,$s],8,Ps),e.fold?((0,s.uX)(),(0,s.CE)("div",Ys,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.children,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"unfold-item",key:e.id},[(0,s.Lk)("div",Hs,(0,n.v_)(e.F_NAME),1),Js])))),128))])):(0,s.Q3)("",!0)])))),128))])])]))}};const en=(0,R.A)(Zs,[["__scopeId","data-v-a259d37c"]]);var an=en;const tn=e=>((0,s.Qi)("data-v-fcfefb50"),e=e(),(0,s.jt)(),e),ln={class:"login-container"},sn={class:"left-side"},nn=tn((()=>(0,s.Lk)("div",{class:"login-title"},"Авторизация",-1))),on={class:"form"},rn={class:"inputs px-4"},cn={class:"loginTypes flex"},An={class:"form-floating mb-3"},dn=tn((()=>(0,s.Lk)("label",{for:"floatingInput"},"Имя пользователя",-1))),un={class:"form-floating"},vn=tn((()=>(0,s.Lk)("label",{for:"floatingPassword"},"Пароль",-1))),pn=tn((()=>(0,s.Lk)("input",{value:"Вход",type:"submit",class:"btn btn-primary text-white"},null,-1))),mn={key:0,class:"error-mess p-2 text-red-600 text-lg"},gn=tn((()=>(0,s.Lk)("div",{class:"right-side"},[(0,s.Lk)("div",{class:"logoImg"},[(0,s.Lk)("img",{src:d,alt:""})]),(0,s.Lk)("div",{class:"logoText"},"Ситуационный центр")],-1)));function bn(e,a,t,o,i,r){const c=(0,s.g2)("v-btn"),A=(0,s.g2)("v-btn-toggle");return(0,s.uX)(),(0,s.CE)("main",null,[(0,s.Lk)("div",ln,[(0,s.Lk)("div",sn,[nn,(0,s.Lk)("div",on,[(0,s.Lk)("div",rn,[(0,s.Lk)("div",cn,[(0,s.bF)(A,{modelValue:i.text,"onUpdate:modelValue":a[0]||(a[0]=e=>i.text=e),color:"deep-purple-accent-3",rounded:"0",group:""},{default:(0,s.k6)((()=>[(0,s.bF)(c,{value:"sc",variant:"outlined"},{default:(0,s.k6)((()=>[(0,s.eW)(" Классическое ")])),_:1}),(0,s.bF)(c,{disabled:"",value:"nomad",variant:"outlined "},{default:(0,s.k6)((()=>[(0,s.eW)(" Пользователь Номада ")])),_:1})])),_:1},8,["modelValue"])]),(0,s.Lk)("form",{onSubmit:a[3]||(a[3]=(0,l.D$)(((...e)=>r.onSubmit&&r.onSubmit(...e)),["prevent"]))},[(0,s.Lk)("div",An,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>i.username=e),type:"text",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[l.Jo,i.username]]),dn]),(0,s.Lk)("div",un,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>i.password=e),type:"password",class:"form-control",id:"floatingPassword",placeholder:"Password"},null,512),[[l.Jo,i.password]]),vn]),pn,i.isError?((0,s.uX)(),(0,s.CE)("p",mn,(0,n.v_)(i.errorMessage),1)):(0,s.Q3)("",!0)],32)])])]),gn])])}var kn={data(){return{username:"",password:"",isError:!1,errorMessage:"",text:"sc"}},computed:{...(0,j.L8)(["errorMessage"])},methods:{...(0,j.i0)(["login"]),async onSubmit(){const e=await this.login({username:this.username,password:this.password,type:this.text});e?this.$router.push("/"):(this.isError=!0,this.errorMessage="Неверное имя пользователя или пароль")}}};const hn=(0,R.A)(kn,[["render",bn],["__scopeId","data-v-fcfefb50"]]);var fn=hn;const yn=e=>((0,s.Qi)("data-v-19737978"),e=e(),(0,s.jt)(),e),Ln={class:"profile-container"},wn={class:"profile-forms w-1/2 mx-auto"},En=yn((()=>(0,s.Lk)("h3",{class:"m-2"},"Мой профиль",-1))),xn={class:"input-group"},Cn={class:"prof-image mx-auto"},In=["src"],_n={class:"input-group mb-3"},Fn=yn((()=>(0,s.Lk)("span",{class:"input-group-text",id:"inputGroup-sizing-default"},"Логин",-1))),Sn=["disabled"],Rn={class:"input-group mb-3"},Bn=yn((()=>(0,s.Lk)("span",{class:"input-group-text",id:"inputGroup-sizing-default"},"Пароль",-1))),Dn=["disabled"],Kn={class:"input-group mb-3"},Xn=yn((()=>(0,s.Lk)("span",{class:"input-group-text",id:"inputGroup-sizing-default"},"Почта",-1))),Qn=["disabled"],Tn={class:"input-group mb-3"},jn=yn((()=>(0,s.Lk)("span",{class:"input-group-text",id:"inputGroup-sizing-default"},"Имя",-1))),Vn=["disabled"],Mn={class:"input-group mb-3"},Un=yn((()=>(0,s.Lk)("span",{class:"input-group-text",id:"inputGroup-sizing-default"},"Фамилия",-1))),On=["disabled"],qn=yn((()=>(0,s.Lk)("div",{class:"input-group mt-5"},[(0,s.Lk)("input",{type:"submit",value:"Сохранить",class:"btn btn-primary mx-auto text-white"})],-1)));var Nn={__name:"MyProfileView",setup(e){const a=(0,E.KR)(!0),t=(0,E.KR)({username:"",password:"",email:"",firstname:"",lastname:"",image:""}),n=(0,E.KR)(""),o=async()=>{const e=1*localStorage.getItem("id"),a=await $(e);t.value={username:a.data.user[0].login,password:a.data.user[0].password,email:a.data.user[0].email,firstname:a.data.user[0].firstname??"НЕТ",lastname:a.data.user[0].lastname??"НЕТ",image:localStorage.getItem("image")??T},console.log(a)},i=e=>{n.value=e.target.files[0]},r=async()=>{const e=new FormData;e.append("image",n.value);try{const a=await ee(e,t.value.username);a.ok?(console.log("Image uploaded successfully"),t.value.image=`${q}/images/`+n.value.name,localStorage.setItem("image",t.value.image)):console.error("Failed to upload image")}catch(a){console.error("Error uploading image:",a)}},c=async()=>{try{const e=Y(t.value);e?alert("Успешно"):alert("Ошибка"),console.log(e)}catch(e){console.log(e)}};return(0,s.sV)((()=>{o()})),(e,n)=>((0,s.uX)(),(0,s.CE)("main",null,[(0,s.Lk)("div",Ln,[(0,s.Lk)("div",wn,[En,(0,s.Lk)("div",xn,[(0,s.Lk)("input",{onChange:i,type:"file",class:"form-control",id:"inputGroupFile04","aria-describedby":"inputGroupFileAddon04",accept:"image/*","aria-label":"Картинка"},null,32),(0,s.Lk)("button",{onClick:n[0]||(n[0]=e=>r()),class:"btn btn-outline-secondary",type:"button",id:"inputGroupFileAddon04"},"Загрузить")]),(0,s.Lk)("form",{class:"sendForm m-2",onSubmit:(0,l.D$)(c,["prevent"])},[(0,s.Lk)("div",Cn,[(0,s.Lk)("img",{src:t.value.image,class:"mx-auto my-10 rounded-full w-36",alt:""},null,8,In)]),(0,s.Lk)("div",_n,[Fn,(0,s.bo)((0,s.Lk)("input",{disabled:a.value,"onUpdate:modelValue":n[1]||(n[1]=e=>t.value.username=e),type:"text",class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default"},null,8,Sn),[[l.Jo,t.value.username]])]),(0,s.Lk)("div",Rn,[Bn,(0,s.bo)((0,s.Lk)("input",{disabled:a.value,"onUpdate:modelValue":n[2]||(n[2]=e=>t.value.password=e),type:"text",class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default"},null,8,Dn),[[l.Jo,t.value.password]])]),(0,s.Lk)("div",Kn,[Xn,(0,s.bo)((0,s.Lk)("input",{disabled:a.value,"onUpdate:modelValue":n[3]||(n[3]=e=>t.value.email=e),type:"text",class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default"},null,8,Qn),[[l.Jo,t.value.email]])]),(0,s.Lk)("div",Tn,[jn,(0,s.bo)((0,s.Lk)("input",{disabled:a.value,"onUpdate:modelValue":n[4]||(n[4]=e=>t.value.firstname=e),type:"text",class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default"},null,8,Vn),[[l.Jo,t.value.firstname]])]),(0,s.Lk)("div",Mn,[Un,(0,s.bo)((0,s.Lk)("input",{disabled:a.value,"onUpdate:modelValue":n[5]||(n[5]=e=>t.value.lastname=e),type:"text",class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default"},null,8,On),[[l.Jo,t.value.lastname]])]),qn],32),(0,s.Lk)("button",{onClick:n[6]||(n[6]=e=>a.value=!a.value),class:"btn btn-primary mx-auto"},"Изменить")])])]))}};const Pn=(0,R.A)(Nn,[["__scopeId","data-v-19737978"]]);var Wn=Pn;const Gn=e=>((0,s.Qi)("data-v-45f58259"),e=e(),(0,s.jt)(),e),zn={class:"board-container"},$n={class:"text-center mt-4"},Yn=Gn((()=>(0,s.Lk)("h2",null,"Доска объявлений",-1))),Hn=Gn((()=>(0,s.Lk)("button",{type:"button",class:"btn btn-primary text-white","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Создать ",-1))),Jn={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Zn={class:"modal-dialog"},eo={class:"modal-content"},ao={class:"modal-header"},to=Gn((()=>(0,s.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Создание",-1))),lo={class:"modal-body"},so={class:"title-input"},no=Gn((()=>(0,s.Lk)("label",{for:"title"},"Заголовок",-1))),oo={class:"body-input"},io=Gn((()=>(0,s.Lk)("label",{for:"body"},"Текст",-1))),ro={class:"modal-footer"},co={class:"boards"},Ao={key:0,class:"birge w-full h-full flex justify-center items-center"},uo=Gn((()=>(0,s.Lk)("h1",{class:"font-mono font-bold"},"Біз біргеміз",-1))),vo=[uo],po={class:"board-header"},mo=["onClick"],go=["src"],bo={class:"title"},ko={class:"board-text"},ho={class:"board-author"},fo={class:"font-bold"},yo={class:"date font-semibold text-sm"};function Lo(e,a,t,o,i,r){return(0,s.uX)(),(0,s.CE)("div",zn,[(0,s.Lk)("div",$n,[Yn,Hn,(0,s.Lk)("div",Jn,[(0,s.Lk)("div",Zn,[(0,s.Lk)("div",eo,[(0,s.Lk)("div",ao,[to,(0,s.Lk)("button",{onClick:a[0]||(a[0]=e=>r.resetObject()),type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),(0,s.Lk)("div",lo,[(0,s.Lk)("div",so,[no,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>i.boardObject.title=e),type:"text",name:"title",class:"",placeholder:"Заголовок",required:""},null,512),[[l.Jo,i.boardObject.title]])]),(0,s.Lk)("div",oo,[io,(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":a[2]||(a[2]=e=>i.boardObject.board_body=e),placeholder:"Текст",name:"body",id:"",cols:"20",rows:"10",required:""},null,512),[[l.Jo,i.boardObject.board_body]])]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>i.boardObject.valid_to=e),type:"date",required:""},null,512),[[l.Jo,i.boardObject.valid_to]])]),(0,s.Lk)("div",ro,[(0,s.Lk)("button",{onClick:a[4]||(a[4]=e=>r.resetObject()),type:"button",class:"btn btn-secondary text-white","data-bs-dismiss":"modal"}," Закрыть "),(0,s.Lk)("button",{onClick:a[5]||(a[5]=e=>r.createBoard()),type:"button",class:"btn btn-primary text-white"}," Сохранить ")])])])])]),(0,s.Lk)("div",co,[0===i.list.length?((0,s.uX)(),(0,s.CE)("div",Ao,vo)):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.list,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:(0,n.C4)(["board",e.role]),style:(0,n.Tr)({transform:`rotate(${r.generateRotation()}deg)`})},[(0,s.Lk)("div",po,[(0,s.Lk)("div",{onClick:a=>r.isDeletable(e.id)&&r.deleteBoard(e.id),class:"pin flex justify-center"},[(0,s.Lk)("img",{src:r.generatePin(),alt:"",width:"30%"},null,8,go)],8,mo),(0,s.Lk)("div",bo,[(0,s.Lk)("h4",null,(0,n.v_)(e.title),1)])]),(0,s.Lk)("div",ko,(0,n.v_)(e.board_body),1),(0,s.Lk)("div",ho,[(0,s.Lk)("h5",fo,(0,n.v_)(e.login),1),(0,s.Lk)("div",yo,(0,n.v_)(e.created_at),1)])],6)))),128))])])}var wo=t.p+"img/pingreen.b2174358.png",Eo=t.p+"img/pinred.31864b6a.png";const xo=async()=>{const e=N;console.log(e);try{const a=await G.A.get(e,{headers:{bearer:localStorage.getItem("authToken")}});return a.data.data}catch(a){console.log(a)}},Co=async e=>{const a=`${N}/${e}`;try{return await G.A.delete(a,{headers:{bearer:localStorage.getItem("authToken")}}),!0}catch(t){return console.log(t),!1}},Io=async e=>{try{const a=await G.A.post(N,e,{headers:{bearer:localStorage.getItem("authToken")}});return a}catch(a){console.log(a)}};var _o={data(){return{minRotation:5,maxRotation:-5,list:[],boardObject:{title:"",board_body:"",valid_to:"",role:1*localStorage.getItem("role")}}},methods:{async createBoard(){if(""===this.boardObject.title||""===this.boardObject.board_body)return alert("Некоторые поля остались пустыми");try{const e=await Io(this.boardObject);200===e.status?(this.boardObject.created_at=(new Date).toLocaleString("ru-RU"),this.boardObject.role=0===this.boardObject.role?"admin":2===this.boardObject.role?"dgd":"ugd",this.list.push(this.boardObject)):(alert("Больше двух объявлений"),console.log("Failed to add board. Status code:",e.status)),this.boardObject={title:"",board_body:"",valid_to:"",role:1*localStorage.getItem("role")}}catch(e){alert("Больше двух объявлений"),console.log(e)}},async getBoardList(){try{this.list=await xo(),this.list.map((e=>{e.role=0===e.role?"admin":2===e.role?"dgd":"ugd"}))}catch(e){console.log(e)}},async deleteBoard(e){const a=await Co(e);a?this.list=this.list.filter((a=>a.id!==e)):alert("Нельзя удалить")},generatePin(){const e=[wo,Eo],a=Math.floor(Math.random()*e.length);return e[a]},generateRotation(){return Math.floor(Math.random()*(this.minRotation-this.maxRotation+1))+this.maxRotation},resetObject(){this.boardObject={title:"",board_body:"",valid_to:"",role:1*localStorage.getItem("role")}}},mounted(){this.getBoardList()},computed:{isDeletable(){return e=>{const a=1*localStorage.getItem("role"),t=0===a?"admin":2===a?"dgd":"ugd",l=this.list.find((a=>a.id===e));return t===l.role||"admin"===t}}}};const Fo=(0,R.A)(_o,[["render",Lo],["__scopeId","data-v-45f58259"]]);var So=Fo,Ro={__name:"TestView",setup(e){const a={chart:{type:"bar",height:350,stacked:!0},plotOptions:{bar:{horizontal:!0,dataLabels:{total:{enabled:!0,offsetX:0,style:{fontSize:"13px",fontWeight:900}}}}},stroke:{width:1,colors:["#fff"]},title:{text:"Fiction Books Sales"},xaxis:{categories:[2008,2009,2010,2011,2012,2013,2014],labels:{formatter:function(e){return e+"K"}}},yaxis:{title:{text:void 0}},tooltip:{y:{formatter:function(e){return e+"K"}}},fill:{opacity:1},legend:{position:"top",horizontalAlign:"left",offsetX:40}},t=[{name:"Marine Sprite",data:[44,55,41,37,22,43,21]},{name:"Striking Calf",data:[53,32,33,52,13,43,32]},{name:"Tank Picture",data:[12,17,11,9,15,11,20]},{name:"Bucket Slope",data:[9,7,5,8,6,9,4]},{name:"Reborn Kid",data:[25,12,19,32,25,24,10]},{name:"Marine Sprite",data:[44,55,41,37,22,43,21]}];return(e,l)=>{const n=(0,s.g2)("apexchart");return(0,s.uX)(),(0,s.Wv)(n,{height:400,options:a,series:t})}}};const Bo=Ro;var Do=Bo;const Ko=localStorage.getItem("authToken"),Xo=async(e,a,t)=>{try{const l="sc"===t?`${W}/login`:`${W}/nomadLogin`,s=await G.A.post(l,{username:e,password:a});return localStorage.setItem("authToken",s.data.token),localStorage.setItem("login",s.data.login),localStorage.setItem("role",s.data.role),localStorage.setItem("id",s.data.id),s}catch(l){console.log(l)}},Qo=async()=>{const e=W;try{return await G.A.get(e,{headers:{bearer:Ko}}),!0}catch(a){return console.log(a),!1}};var To=(0,j.y$)({state:{isAuthenticated:!!localStorage.getItem("authToken"),errorMessage:"",username:localStorage.getItem("login")||null,userInfo:"",parentBranchId:"",childBranchId:""},mutations:{setAuthentication(e,a){e.isAuthenticated=a},setErrorMessage(e,a){e.errorMessage=a},setUsername(e,a){e.username=a},setParentBranchId(e,a){e.parentBranchId=a},setChildBranchId(e,a){e.childBranchId=a}},actions:{async login({commit:e},{username:a,password:t,type:l}){try{const s=await Xo(a,t,l);return e("setUsername",s.data.login),e("setAuthentication",!0),!0}catch(s){return s.response?401===s.response.status?e("setErrorMessage","Неверное имя пользователя или пароль"):500===s.response.status?e("setErrorMessage","Проблемы с сервером. Повторите поеже"):e("setErrorMessage","Произошла ошибка. Повторите поеже"):s.request?e("setErrorMessage","Нет ответа от сервера. Повторите поеже."):e("setErrorMessage","Произошла ошибка. Повторите поеже."),console.error(s),!1}},async logout({commit:e}){e("setAuthentication",!1),localStorage.removeItem("authToken"),localStorage.removeItem("login")},clearErrorMessage({commit:e}){e("setErrorMessage","")},async checkToken({commit:e}){const a=await Qo();a?e("setAuthentication",!0):(e("setAuthentication",!1),localStorage.removeItem("authToken"))}},getters:{errorMessage:e=>e.errorMessage,username:e=>e.username,userImage:e=>e.userImage,parentBranchId:e=>e.parentBranchId,childBranchId:e=>e.childBranchId,isAuth:(e,a,t,l)=>()=>(t.isAuthenticated=l.isAuthenticated,e.dispatch("checkToken"),!!e.username&&!!localStorage.getItem("authToken"))},modules:{}});const jo=[{path:"/test",name:"test page",component:Do},{path:"/login",name:"login page",component:fn},{path:"/profile",name:"profile page",component:Wn,meta:{requiresAuth:!0}},{path:"/",name:"amountDash",component:ua,props:!0,meta:{requiresAuth:!0}},{path:"/time-dash",name:"timeDash",component:ya,meta:{requiresAuth:!0}},{path:"/monitoring",name:"monitoring",component:kt,meta:{requiresAuth:!0}},{path:"/employee-rate",name:"employee-rate",component:Dt,meta:{requiresAuth:!0}},{path:"/tickets",name:"tickets",component:Nt,meta:{requiresAuth:!0}},{path:"/chat",name:"chat",component:yl,meta:{requiresAuth:!0}},{path:"/server",name:"servers",component:zl,meta:{requiresAuth:!0}},{path:"/users",name:"users",component:ms,meta:{requiresAuth:!0}},{path:"/changer",name:"menu-changer",component:Ms,meta:{requiresAuth:!0}},{path:"/cameras",name:"cameras",component:an,meta:{requiresAuth:!0}},{path:"/bill-board",name:"billboard",component:So,meta:{requiresAuth:!0}}],Vo=(0,w.aE)({history:(0,w.LA)("/"),routes:jo});Vo.beforeEach((async(e,a,t)=>{const l=Qo(),s=To.state.isAuthenticated&&l;"/login"===e.path&&s?t({name:"main"}):e.meta.requiresAuth?s?t():t("/login"):t()}));var Mo=Vo,Uo=t(4458);(0,Uo.k)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});t(3855);var Oo=t(1758),qo=(t(8077),t(5524),t(9666)),No=t(5469),Po=t(3739),Wo=t(1718);const Go=(0,l.Ef)(Ze);Go.use(Oo.A);const zo=(0,qo.$N)({locale:{locales:{ru:Wo.A},current:"ru"},components:No,directives:Po});Go.use(To).use(Mo).use(zo).mount("#app")}},a={};function t(l){var s=a[l];if(void 0!==s)return s.exports;var n=a[l]={exports:{}};return e[l].call(n.exports,n,n.exports,t),n.exports}t.m=e,function(){var e=[];t.O=function(a,l,s,n){if(!l){var o=1/0;for(A=0;A<e.length;A++){l=e[A][0],s=e[A][1],n=e[A][2];for(var i=!0,r=0;r<l.length;r++)(!1&n||o>=n)&&Object.keys(t.O).every((function(e){return t.O[e](l[r])}))?l.splice(r--,1):(i=!1,n<o&&(o=n));if(i){e.splice(A--,1);var c=s();void 0!==c&&(a=c)}}return a}n=n||0;for(var A=e.length;A>0&&e[A-1][2]>n;A--)e[A]=e[A-1];e[A]=[l,s,n]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var l in a)t.o(a,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:a[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,l){var s,n,o=l[0],i=l[1],r=l[2],c=0;if(o.some((function(a){return 0!==e[a]}))){for(s in i)t.o(i,s)&&(t.m[s]=i[s]);if(r)var A=r(t)}for(a&&a(l);c<o.length;c++)n=o[c],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(A)},l=self["webpackChunkvue_js"]=self["webpackChunkvue_js"]||[];l.forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l))}();var l=t.O(void 0,[504],(function(){return t(9659)}));l=t.O(l)})();
//# sourceMappingURL=app.f75a0e2e.js.map